{
    "sourceFile": "frontend/src/pages/CreatePartner.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1741299786407,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1741302535896,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,143 @@\n-import React from 'react'\n+import { useState } from \"react\";\n+import api from \"../api\";\n \n+const styles = {\n+  container: {\n+    display: \"flex\",\n+    flexDirection: \"column\" as const,\n+    alignItems: \"center\",\n+    justifyContent: \"center\",\n+    marginTop: \"50px\",\n+  },\n+  title: {\n+    fontSize: \"2rem\",\n+    fontFamily: \"Arial, sans-serif\",\n+    marginBottom: \"20px\",\n+  },\n+  form: {\n+    display: \"flex\",\n+    flexDirection: \"column\" as const,\n+    width: \"300px\",\n+  },\n+  input: {\n+    padding: \"10px\",\n+    marginBottom: \"10px\",\n+    fontSize: \"1rem\",\n+    borderRadius: \"5px\",\n+    border: \"1px solid #ccc\",\n+  },\n+  button: {\n+    padding: \"10px\",\n+    fontSize: \"1rem\",\n+    backgroundColor: \"#007bff\",\n+    color: \"white\",\n+    border: \"none\",\n+    borderRadius: \"5px\",\n+    cursor: \"pointer\",\n+  },\n+  buttonDisabled: {\n+    backgroundColor: \"#ccc\",\n+    cursor: \"not-allowed\",\n+  },\n+  error: {\n+    color: \"red\",\n+    marginBottom: \"10px\",\n+  },\n+};\n+\n export default function CreatePartner() {\n-  return (\n-    <div>CreatePartner</div>\n-  )\n+    const [tradingName, setTradingName] = useState(\"\");\n+    const [ownerName, setOwnerName] = useState(\"\");\n+    const [document, setDocument] = useState(\"\");\n+    const [coverageArea, setCoverageArea] = useState(\"\");\n+    const [address, setAddress] = useState(\"\");\n+    const [loading, setLoading] = useState(false);\n+    const [error, setError] = useState<string | null>(null);\n+  \n+    const handleSubmit = async (e: React.FormEvent) => {\n+      e.preventDefault();\n+  \n+      if (!tradingName || !ownerName || !document || !coverageArea || !address) {\n+        setError(\"Todos os campos são obrigatórios!\");\n+        return;\n+      }\n+  \n+      setLoading(true);\n+      setError(null);\n+  \n+      try {\n+        const parsedCoverageArea = JSON.parse(coverageArea);\n+        const parsedAddress = JSON.parse(address);\n+  \n+        await api.post(\"/partners\", {\n+          trading_name: tradingName,\n+          owner_name: ownerName,\n+          document,\n+          coverage_area: parsedCoverageArea,\n+          address: parsedAddress,\n+        });\n+  \n+        alert(\"Parceiro cadastrado com sucesso!\");\n+        setTradingName(\"\");\n+        setOwnerName(\"\");\n+        setDocument(\"\");\n+        setCoverageArea(\"\");\n+        setAddress(\"\");\n+      } catch (error) {\n+        console.error(\"Erro ao cadastrar parceiro\", error);\n+        setError(\"Erro ao cadastrar parceiro, verifique os dados e tente novamente.\");\n+      } finally {\n+        setLoading(false);\n+      }\n+    };\n+  \n+    return (\n+      <div style={styles.container}>\n+        <h1 style={styles.title}>Cadastrar Parceiro</h1>\n+        {error && <p style={styles.error}>{error}</p>}\n+        <form onSubmit={handleSubmit} style={styles.form}>\n+          <input\n+            type=\"text\"\n+            placeholder=\"Nome Fantasia\"\n+            value={tradingName}\n+            onChange={(e) => setTradingName(e.target.value)}\n+            style={styles.input}\n+          />\n+          <input\n+            type=\"text\"\n+            placeholder=\"Nome do Dono\"\n+            value={ownerName}\n+            onChange={(e) => setOwnerName(e.target.value)}\n+            style={styles.input}\n+          />\n+          <input\n+            type=\"text\"\n+            placeholder=\"Documento\"\n+            value={document}\n+            onChange={(e) => setDocument(e.target.value)}\n+            style={styles.input}\n+          />\n+          <textarea\n+            placeholder='Área de Cobertura (JSON ex: {\"type\": \"MultiPolygon\", \"coordinates\": [[[...]]]} )'\n+            value={coverageArea}\n+            onChange={(e) => setCoverageArea(e.target.value)}\n+            style={styles.input}\n+          />\n+          <textarea\n+            placeholder='Endereço (JSON ex: {\"type\": \"Point\", \"coordinates\": [lat, lon]} )'\n+            value={address}\n+            onChange={(e) => setAddress(e.target.value)}\n+            style={styles.input}\n+          />\n+          <button\n+            type=\"submit\"\n+            disabled={loading}\n+            style={loading ? { ...styles.button, ...styles.buttonDisabled } : styles.button}\n+          >\n+            {loading ? \"Cadastrando...\" : \"Cadastrar\"}\n+          </button>\n+          \n+        </form>\n+      </div>\n+    )\n }\n"
                }
            ],
            "date": 1741299786407,
            "name": "Commit-0",
            "content": "import React from 'react'\n\nexport default function CreatePartner() {\n  return (\n    <div>CreatePartner</div>\n  )\n}\n"
        }
    ]
}